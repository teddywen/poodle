linux账户
一、磁盘分区
磁盘 /dev/xvdb. 分区并格式化 /dev/xvdb1. 挂载到 /var 中.
添加开机挂载启动项 /etc/fstab 

二、交换区
新建 /var/swap/swapfile 2GB
添加开机挂载启动项 /etc/fstab 

三、新建用户
groupadd wen.xiang
groupadd chen.songping
groupadd shang.jie
groupadd scw
useradd -g wen.xiang wen.xiang
useradd -g chen.songping chen.songping
useradd -g shang.jie shang.jie
usermod -a -G scw wen.xiang
usermod -a -G scw chen.songping
usermod -a -G scw shang.jie
切换到某一个用户下并执行ssh配置操作,命令如下:
    su - wen.xiang
    mkdir .ssh
    chmod 700 .ssh
    cd .ssh
    echo "<登陆用的公钥>" > authorized_keys
    chmod 600 authorized_keys
chmod u+w /etc/sudoers
vim /etc/sudoers
    root    ALL=(ALL)       ALL
    + wen.xiang    ALL=(ALL)       NOPASSWD: ALL
    + shang.jie    ALL=(ALL)       NOPASSWD: ALL
    + chen.songping    ALL=(ALL)       NOPASSWD: ALL
chmod u-w /etc/sudoers

四、sshd配置
vim /etc/ssh/sshd_config
    - PermitRootLogin yes
    + PermitRootLogin no

五、trash-cli
cd /usr/local/src/
git clone https://github.com/andreafrancia/trash-cli.git
cd trash-cli
easy_install trash-cli

六、memcached
yum install libevent-devel
cd /usr/local/src/
wget http://memcached.org/files/memcached-1.4.24.tar.gz
tar -zxvf memcached-1.4.24.tar.gz
cd memcached-1.4.24/
./configure
make
make install

七、apache配置
vim /usr/local/apache2/conf/httpd.conf
    - #LoadModule deflate_module modules/mod_deflate.so
    - LoadModule deflate_module modules/mod_deflate.so

    - #LoadModule rewrite_module modules/mod_rewrite.so
    + LoadModule rewrite_module modules/mod_rewrite.so
    + LoadModule php5_module        modules/libphp5.so

    - ServerName domain:80
    + ServerName <real ip>:80

    <IfModule dir_module>
        - DirectoryIndex index.html
        + DirectoryIndex index.php index.htm index.html
    </IfModule>

    - DocumentRoot "/path/to/htdocs"
    - <Directory "/path/to/htdocs">
    + DocumentRoot "/srv/www/poodle_prod/web"
    + <Directory "/srv/www/poodle_prod/web">

    - AllowOverride None
    + AllowOverride All

    #AddHandler type-map var
    + AddHandler php5-script .php

    # Various default settings
    - #Include conf/extra/httpd-default.conf
    + Include conf/extra/httpd-default.conf

    # Server-pool management (MPM specific)
    - #Include conf/extra/httpd-mpm.conf
    + Include conf/extra/httpd-mpm.conf

    + <IfModule deflate_module>
    + SetOutputFilter DEFLATE
    + DeflateCompressionLevel 9
    + </IfModule>

vim /usr/local/apache2/conf/mime.types
    x-conference/x-cooltalk                         ice
    + # php
    + application/x-httpd-php                         php phtml php3
    + application/x-httpd-php-source                  phps

vim /usr/local/apache2/conf/extra/httpd-mpm.conf
    <IfModule mpm_event_module>
        StartServers             3
        MinSpareThreads         75
        MaxSpareThreads        250
        ThreadsPerChild         25
        MaxRequestWorkers      400
        - MaxConnectionsPerChild 0
        + MaxConnectionsPerChild 1000
    </IfModule>

八、php配置
1. memcache扩展
cd /usr/local/src/
wget http://pecl.php.net/get/memcache-2.2.7.tgz
tar -zxvf memcache-2.2.7.tgz
cd memcache-2.2.7/
phpize
./configure
make
make install
vim /usr/local/lib/php.ini
    + extension=memcache.so
apachectl restart

2. gd扩展
yum install libpng-devel
cd /usr/local/src/php-5.6.16/ext/gd/
phpize
./configure
make
make install
vim /usr/local/lib/php.ini
    + extension=gd.so
apachectl restart

3. pdo扩展
cd /usr/local/src/php-5.6.16/ext/pdo_mysql/
phpize
./configure
make
make install
vim /usr/local/lib/php.ini
    + extension=pdo_mysql.so
apachectl restart

九、mysql配置
1. 新建mysql账号
mysql -h 127.0.0.1 -u root -p
    mysql> create schema poodle_prod;
    mysql> CREATE USER 'poodle_prod'@'127.0.0.1' IDENTIFIED BY '';
    mysql> GRANT ALL PRIVILEGES ON poodle_prod.* TO 'poodle_prod'@'127.0.0.1' WITH GRANT OPTION;

2. 初始化站点db
mysql -h 127.0.0.1 -u root -p
    mysql> use poodle_prod;
    mysql> source /path/to/tabledump.sql
    mysql> LOAD DATA infile '/path/to/datadump_auth_item.txt' into table auth_item;
    mysql> LOAD DATA infile '/path/to/datadump_auth_item_child.txt' into table auth_item_child;
    mysql> LOAD DATA infile '/path/to/datadump_auth_assignment.txt' into table auth_assignment;
    mysql> LOAD DATA infile '/path/to/datadump_gov_user.txt' into table gov_user;

